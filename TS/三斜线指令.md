# 三斜线指令
声明编译时的依赖关系，全局的！
特性：
三斜线指令必须放在文件的最顶部，前面只能有其他三斜线指令或空白，不能有代码或普通注释
仅对全局类型有效：


## 为何感觉 “用得少了”？
现代 TypeScript 项目更依赖 ES 模块（import/export）和自动类型发现（@types），导致三斜线指令的使用频率下降：

模块化类型文件通过 import 声明依赖，无需 path 指令。
@types 包通过 typeRoots 自动识别，无需 types 指令。
多数项目无需手动引入内置库（默认包含常用的 es5、dom 等）。

## 三斜线指令的必要性：
三斜线指令并未被废弃，它在处理全局类型依赖、内置库引入、非模块化代码兼容等场景时仍不可替代。只是在现代模块化项目中，其使用场景被 import 和自动类型发现机制大幅压缩。
> 现代项目更推荐模块化 .d.ts，因为全局类型容易导致命名冲突，且不利于类型的按需加载和维护。
> 总结
> 三斜线指令用得少，是因为现代项目更依赖模块化（import）和自动类型发现，全局类型场景减少。
> 三斜线指令用于全局类型依赖，import 用于模块类型依赖，两者作用于不同的作用域。

合理的使用原则是：

模块化代码中优先用 import 管理依赖。
全局类型或特殊场景（如引入 dom 库）时，再考虑三斜线指令。
/// 

* ```/// <reference path="..." />```：引用本地类型文件。作用：拆分全局类型到多个 .d.ts 文件时，相互引用。
    > 由于TS对模块（import/export）的支持完善，现在这种方式用的越来越少了。对于本地类型文件，更推荐用 import 引入

* ```/// <reference types="..." />```：引用 npm 类型包，用于引入第三方库的类型声明（通过 @types/xxx 安装的类型包）。
    > 对于npm 类型包，TS 会自动扫描 node_modules/@types，无需手动声明（只要 tsconfig.json 中 typeRoots 包含 @types，默认是包含的）。


* ```/// <reference lib="..." />```：
用于**显式引入 TypeScript 内置的类型库**（如 DOM、ES6 等），这些库定义了 JS 运行时环境的基础类型（如 window、Promise 等）。


///// //
常见的三斜线指令：
### ```/// <reference path="..." />```
最常用的三斜线指令，用于声明当前文件依赖另一个类型文件（通常是 .d.ts），告诉 TypeScript 编译器在编译时需要先加载指定路径的文件，确保类型信息可用。

使用场景：

在全局 .d.ts 文件中引用其他全局类型文件，合并类型信息。
**在非模块化的代码中（无 import/export）声明类型依赖。**
```js
// a.d.ts（全局类型文件）
declare interface A {
  name: string;
}

// b.d.ts（依赖 a.d.ts）
/// <reference path="./a.d.ts" />
declare interface B extends A {
  age: number;
}
```
此时 B 接口能正确继承 A 接口，因为编译器先加载了 a.d.ts。

###  ```/// <reference types="..." />```
用于声明对某个 npm 包的类型依赖，通常指向 @types 下的类型包（如 @types/react）。

使用场景：

**当项目中使用了某个没有自带类型的库，且已安装其类型包**（@types/xxx），用此指令声明依赖。  TODO:疑问❓
替代 import 来引入类型，避免生成额外的 JS 代码。
```js
// 声明依赖 @types/jquery 类型包
/// <reference types="jquery" />

// 此时可直接使用 jQuery 的类型
const elem = jQuery('#app');
```


### ```/// <reference lib="..." />```
用于***显式引入 TypeScript 内置的类型库***（如 DOM、ES6 等），这些库定义了 JS 运行时环境的基础类型（如 window、Promise 等）。
```js
// 引入 DOM 环境的类型（如 window、document 等）
/// <reference lib="dom" />

// 引入 ES6 标准库的类型（如 Promise、Map 等）
/// <reference lib="es6" />

console.log(window.location); // 此时不会报错
```


注意事项

现代项目中使用减少：随着 ES 模块（import/export）的普及，三斜线指令的使用场景逐渐减少。对于模块化项目，更推荐使用 import 来声明依赖。


总结：
三斜线指令是 TypeScript 早期用于管理类型依赖的语法，核心作用是声明编译时的类型依赖关系，确保编译器能正确识别所有必要的类型信息。


## 疑问❓
模块化 .d.ts 中可以通过 declare global 扩展全局类型，此时三斜线指令可用于引入扩展所需的基础类型：


## 疑问❓ TypeScript 内置的类型库与第三方npm包有点分不清楚
内置类型库主要定义 JavaScript 语言原生特性 和 运行时环境（如浏览器、Node.js） 的基础类型，例如：

如何区别？
* 看是否需要单独安装：内置类型库随 typescript 一起存在，无需额外安装；第三方包必须通过 npm install 安装。
* 看作用范围：内置类型库覆盖 “所有项目都需要的基础环境”；第三方包只针对特定库或框架（如 React、Vue、jQuery 等）。
* 看引用方式：内置类型库通过 tsconfig.json 的 lib 选项配置（如 "lib": ["es6", "dom"]）；第三方包通过 import 引入或自动被 TS 识别（如 @types 包）。

如何控制内置类型库?
```js
{
  "compilerOptions": {
    "lib": ["es2020", "dom"] // 明确指定加载 ES2020 语言库和 DOM 环境库
  }
}
```
如果不配置 lib，TS 会根据 target（编译目标）自动加载对应版本的内置库（如 target: "es5" 会自动加载 lib.es5.d.ts）。
若项目是 Node.js 环境，通常不需要 dom 库，可只配置 ["es2020", "esnext.asynciterable"]。
