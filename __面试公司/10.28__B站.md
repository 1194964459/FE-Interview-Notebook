# B站

闭包

promise

JS有了宏任务，为什么还要有微任务？

前端怎么做性能优化的？
vue、react比较一下

前端如何收集日志？CDN是如何工作的？对前端容器了解吗？
https://www.doubao.com/thread/wc84bacee195bca0f

**前端容器**的核心是 “提供一个可运行前端应用的环境载体”，让其能脱离传统浏览器，在不同平台（PC、移动端、服务器端）运行，同时具备更强的系统交互能力和环境隔离性。


前端日志收集的核心是 捕获用户行为、页面性能、代码错误等信息，并通过接口异步上报到后端日志系统，用于问题排查、用户分析和性能监控。   
1.错误日志：
* window.onerror 监听全局错误
* window.addEventListener('error') 监听资源（图片、CSS、JS 等）加载失败。
* 接口请求错误     

2.行为日志捕获：
    埋点   
3.性能日志捕获：performance  
4.日志上报方式：通过 Image 标签（兼容性最好）或 fetch 异步发送日志，避免阻塞页面。



## 团队：
游戏技术中台，主要是负责游戏部门支持游戏的，比如说发行活动，就是围绕整个游戏的整个生命周期来的一个部门，然后前端在这边主要是负责他的活动一些嵌在游戏里面的一些功能页面，然后包括支持整个游戏运维的一些东西，还有的时候会做一些比如说游戏发行商要求的一些

主要toC

前端 16 个，这样可以的，前端 16 个。对，但我们是大部门，前端是跟客户端、后端在一起。

## 手写代码题


```js
// wait
// async wait(timer){  // TODO:这里搞错了，await后必须跟一个promise
//     await setTimeout(()=>{  // setTimeout立即执行了，并返回一个定时器ID
//         // console.log(timer)    
//     },timer)
//     console.log('不等待，立即执行')
// }

async function wait(timer) {
  // 包装成 Promise：resolve 会在定时器回调中触发
  await new Promise((resolve) => {
    setTimeout(() => {
      // 可以在这里执行定时器完成后的逻辑
      console.log("定时器执行完毕");
      resolve(); // 通知 await 等待结束
    }, timer);
  });
}

function compose(...fns){  // TODO:这里应该是用rest参数
    if(fns.length==0){
        return (arg)=>arg
    }
    if(fns.length ==1){
        return fns[0]
    }

    return fns.reduce((prev, cur)=>{
        return async (...args)=> await prev(cur(...args))
    })
}
function say(args){
    console.log(args)
}
function world(args){
    console.log(args)
}

return insv.compose(world, wait, say)
```