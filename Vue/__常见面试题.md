# 常见面试题

参考：[常见面试题](https://www.doubao.com/thread/w51c0bfc97a4f1447)

## Keep-alive 与 动态组件 对比：
* `<component :is="...">` 在多个组件间作切换时，被切换掉的组件会被**卸载**。 
* `<KeepAlive>` 在多个组件间动态切换时**缓存被移除的组件实例、包括它的状态**，被移除的组件依旧是“**存活**”的状态。

## Teleport
Teleport 可以将一个组件内的**部分模板内容**“传送”到**该组件的 DOM 结构外层**，与React的 **Portals组件**类似。常用于处理**模态框、提示框等需要脱离常规 DOM 层级进行渲染的 UI 元素**。用to属性指定 要传送到的目标位置！

这类组件：**逻辑上**从属于父组件，但**从整个应用视图的角度**来看，被渲染在了 DOM 结构外层。

逻辑上的从属关系指的是：传入的 props 和触发的事件也会照常工作。


```js
<button @click="open = true">Open Modal</button>

<Teleport to="body">
  <div v-if="open" class="modal">
    <p>Hello from the modal!</p>
    <button @click="open = false">Close</button>
  </div>
</Teleport>
```

## Vue项目中的错误是如何处理的？
除以下两类外，错误基本都可以用try/catch来捕获。

**1. 组件内错误处理**  
errorCaptured生命周期钩子 捕获子孙组件错误。注意：无法捕获自身组件的错误哦！

返回值：
* 返回 false：阻止错误继续向上传播；
* 返回 true 或不返回：允许错误继续向上传播

```js
export default {
  errorCaptured(err, vm, info) {
    // 处理错误，vm指的是错误来源组件
    console.error('组件错误:', err, info)
    
    // 返回false阻止错误继续向上传播
    return false
  }
}
```

**2. 全局错误处理**  
通过app.config.errorHandler捕获整个应用的错误：
```js
const app = createApp(App)

app.config.errorHandler = (err, vm, info) => {
  // 处理错误，如发送到错误监控服务
  console.error('全局错误:', err, info)
}
```

## Vue中如何定义全局方法？
如：app.config.globalProperties、封装为插件、Mixin

需注意：**全局方法建议添加前缀**（如 $）以避免与组件内部方法冲突；组合式 API 中，**getCurrentInstance 仅在 setup 或生命周期钩子中可用**。对于大型项目，更推荐使用组合式函数（Composables）来复用逻辑，而非过度依赖全局方法

**1. app.config.globalProperties（最常用）**

```js
// 定义全局方法
app.config.globalProperties.$showMessage = function(text) {
    alert(`全局提示：${text}`)
}
```

选项式API中使用：
```js
this.$showMessage('欢迎使用全局方法')
```

组合式 API 中需通过 getCurrentInstance 获取：

```js
import { getCurrentInstance } from 'vue'

export default {
    setup() {
        const instance = getCurrentInstance()
        // 通过 proxy 访问全局方法（推荐）
        instance.proxy.$showMessage('组合式 API 中调用')
    }
}
```

2. 封装为插件（适合复杂功能）
```js
export default {
  install(app) {
    // 定义多个全局方法
    app.config.globalProperties.$log = function(message) {
      console.log('[全局日志]', message)
    }
  }
```

使用：
```js
import { createApp } from 'vue'

const app = createApp(App)
app.use(globalMethods) // 安装插件
```

3. 全局混入 Mixin，可能导致命名冲突，建议谨慎使用
```js
const app = createApp(App)

app.mixin({
  methods: {}
})
```
4. Vue 2 中，可以给 Vue.prototype 添加属性的方式定义全局方法

