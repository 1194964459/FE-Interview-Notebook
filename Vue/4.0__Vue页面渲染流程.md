# Vue 页面渲染流程

created 之后，beforeMount 之前：这是模板编译的专属阶段。


```js
初始化阶段
  ↓
new Vue()/createApp()
  ↓
beforeCreate（数据未初始化，无法访问 data）
  ↓
created（数据初始化完成，可访问 data，但无 DOM）
  ↓
模板编译（生成 render 函数）
  ↓
beforeMount（渲染函数就绪，即将挂载 DOM，可访问 data，不可操作 DOM）
  ↓
执行render函数  生成虚拟 DOM → patch 转换为真实 DOM → 插入页面
  ↓
mounted（真实 DOM 已挂载，可操作 DOM）
```

## 虚拟DOM
用 JS 对象描述真实 DOM 的结构，避免频繁操作真实 DOM
```JS
{ 
  tag: 'div', 
  props: {}, 
  children: [],
  key: '',
  text：''  // 文本节点内容
}
```


## 渲染函数
Vue 中的渲染函数是用来生成虚拟 DOM（VNode）的，是模版编译的最终产物，用起来比较灵活。

在 Vue 中，render 选项和 `<template> 模板`是两种互斥的视图描述方式：如果组件定义了 render 函数，Vue 会直接使用它生成虚拟 DOM，而忽略 `<template>` 中的内容。

Vue2 和 Vue3 中基于渲染函数来生成DOM的主要方式有：  
* Vue2：渲染函数是h()，在选项式API中通过render选项返回 h()  
* Vue3：渲染函数是createVNode函数
  * 选项式API中，通过render选项返回 createVNode()
  * setup函数，返回 createVNode()

参考：[Vue2和Vue3的渲染函数 及示例](./4.2__Vue中的渲染函数.md)