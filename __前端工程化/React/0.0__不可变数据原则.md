# 不可变数据原则
不可变数据原则 是 React 开发中的重要概念，指**数据一旦创建就不能被直接修改，若要变更数据，需*创建新的数据副本*并*修改副本*，而非修改原数据**。这一原则是解决 React 中状态更新、性能优化（尤其是浅比较）问题的核心方案。

## 不可变数据的核心操作
核心是：不修改原数据，返回新副本

**1. 基本类型**   
基本类型本身是不可变的，赋值操作会直接创建新值，无需处理

**2. 对象**   
更新对象时，用扩展运算符（...）复制原对象的所有属性，再修改目标属性：
```js
const user = { name: "Alice", age: 20 };

// 错误：直接修改原对象（引用不变）
user.age = 21;

// 正确：创建新对象（引用变化）
const newUser = { ...user, age: 21 }; 
// 结果：{ name: "Alice", age: 21 }（原 user 保持不变）
```

**深层对象更新**：需逐层复制，确保每层引用都变化：
```js
const user = { 
  name: "Alice", 
  info: { city: "Beijing", job: "Engineer" } 
};

// 更新深层属性（info.city）
const newUser = {
  ...user, // 复制外层
  info: { ...user.info, city: "Shanghai" } // 复制内层并修改
};
// 结果：info 引用变化，city 被更新，job 保留
```

**3. 数组**  
更新数组时，使用数组方法返回新数组（如 map、filter、concat），或用扩展运算符复制：

```js
const list = [1, 2, 3];

// 1. 添加元素
const newList1 = [...list, 4]; // [1, 2, 3, 4]

// 2. 修改元素（索引 1 的值）
const newList2 = list.map((item, index) => 
  index === 1 ? 20 : item 
); // [1, 20, 3]

// 3. 删除元素（值为 2 的元素）
const newList3 = list.filter(item => item !== 2); // [1, 3]

// 4. 替换数组（清空或全量替换）
const newList4 = []; // 空数组（引用变化）
```