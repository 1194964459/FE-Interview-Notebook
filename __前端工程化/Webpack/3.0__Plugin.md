# Plugin
* 常见 Plugin 及使用方法
* 如何实现一个 Plugin

## 自定义插件 及 使用
**示例 1：使用 done 钩子输出构建信息**

done 钩子在构建完成后触发，可用于输出构建结果统计。

```js
// 自定义插件：BuildStatsPlugin.js
class BuildStatsPlugin {
  apply(compiler) {
    // 注册 done 钩子（同步钩子，使用 tap）
    compiler.hooks.done.tap('BuildStatsPlugin', (stats) => {
      console.log('构建完成！');
      console.log(`耗时：${stats.endTime - stats.startTime}ms`);
      console.log(`输出文件：${Object.keys(stats.compilation.assets).join(', ')}`);
    });
  }
}

module.exports = BuildStatsPlugin;
```

在 Webpack 配置中使用：
```js
// webpack.config.js
const BuildStatsPlugin = require('./BuildStatsPlugin');

module.exports = {
  // ...其他配置
  plugins: [
    new BuildStatsPlugin() // 实例化插件
  ]
};
```

**示例2：使用 emit 钩子添加额外文件**

**emit 钩子在资源输出到目录前触发，可用于动态添加文件**。

```js
// 自定义插件：AddExtraFilePlugin.js
class AddExtraFilePlugin {
  constructor(options) {
    this.filename = options.filename || 'extra.txt';
  }

  apply(compiler) {
    // 注册 emit 钩子（异步串行钩子，使用 tapAsync）
    compiler.hooks.emit.tapAsync(
      'AddExtraFilePlugin',
      (compilation, callback) => {
        // 向输出资源中添加一个文件
        compilation.assets[this.filename] = {
          source: () => '这是通过插件添加的额外内容', // 文件内容
          size: () => 24 // 内容长度（字节）
        };
        callback(); // 通知异步操作完成
      }
    );
  }
}

module.exports = AddExtraFilePlugin;
```
在 Webpack 配置中使用：

```js
// webpack.config.js
const AddExtraFilePlugin = require('./AddExtraFilePlugin');

module.exports = {
  // ...其他配置
  plugins: [
    new AddExtraFilePlugin({ filename: 'info.txt' }) // 自定义文件名
  ]
};
```

## 常见的 Plugin
define-plugin：定义环境变量​

html-webpack-plugin：简化html文件创建​

uglifyjs-webpack-plugin：通过UglifyES压缩ES6代码​

webpack-parallel-uglify-plugin: 多核压缩,提高压缩速度​

webpack-bundle-analyzer: 可视化webpack输出文件的体积​

mini-css-extract-plugin: CSS提取到单独的文件中,支持按需加载