# 列表转树形结构

参考：https://juejin.cn/post/6983904373508145189


```js
[
    {
        id: 1,
        text: '节点1',
        parentId: 0 //这里用0表示为顶级节点
    },
    {
        id: 2,
        text: '节点1_1',
        parentId: 1 //通过这个字段来确定子父级
    }
    ...
]

// 转成
[
    {
        id: 1,
        text: '节点1',
        parentId: 0,
        children: [
            {
                id:2,
                text: '节点1_1',
                parentId:1
            }
        ]
    }
]
```

实现代码如下：

```js
function listToTree(items) {
    const result = [];   // 存放结果集
    const itemMap = {};  // 

    // 先转成map存储
    for (const item of items) {
        itemMap[item.id] = { ...item, children: [] }
    }

    for (const item of items) {
        const pid = item.pid;
        const treeItem = itemMap[item.id];
        // 根节点
        if (pid === 0) {
            result.push(treeItem);
        }
        // 若是子节点，找到其父节点并将它假如children
        else {
            itemMap[pid].children.push(treeItem)
        }

    }
    return result;
}
```