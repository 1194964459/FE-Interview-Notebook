# 职责链模式
职责链设计模式是一种行为型模式，核心思想是：**将多个处理对象连成一条链，让请求在链上依次传递，直到被某个对象处理**。每个处理对象只需要关注自己职责范围内的请求，无法处理时就自动传给下一个对象，从而实现请求发送者与处理者的解耦。

发起请求时，只需将请求交给链的第一个节点（部门主管），无需关心最终由谁审批

### 简单示例：请假审批流程 
假设公司请假审批规则是：

* 请假≤3 天：部门主管审批
* 3 天 < 请假≤7 天：经理审批
* 请假 > 7 天：总经理审批

```js
// 抽象处理者：定义处理接口和下一个处理者
class Approver {
  constructor(nextApprover) {
    this.nextApprover = nextApprover; // 下一个审批人
  }

  // 处理请假请求（子类实现具体逻辑）
  approve(leaveDays) {
    throw new Error("子类需实现审批逻辑");
  }
}

// 具体处理者1：部门主管（处理≤3天）
class Director extends Approver {
  approve(leaveDays) {
    if (leaveDays <= 3) {
      return `部门主管批准：${leaveDays}天假期`;
    }
    // 无法处理，传给下一个审批人
    return this.nextApprover?.approve(leaveDays);
  }
}

// 具体处理者2：经理（处理3-7天）
class Manager extends Approver {
  approve(leaveDays) {
    if (leaveDays > 3 && leaveDays <= 7) {
      return `经理批准：${leaveDays}天假期`;
    }
    // 无法处理，传给下一个审批人
    return this.nextApprover?.approve(leaveDays);
  }
}

// 具体处理者3：总经理（处理>7天）
class GeneralManager extends Approver {
  approve(leaveDays) {
    if (leaveDays > 7 && leaveDays <= 15) {
      return `总经理批准：${leaveDays}天假期`;
    }
    // 超出所有审批范围
    return "请假天数超出审批权限";
  }
}

// 构建职责链：主管 → 经理 → 总经理
const generalManager = new GeneralManager();
const manager = new Manager(generalManager);
const director = new Director(manager);

// 测试不同请假天数
console.log(director.approve(2));  // 部门主管批准：2天假期
console.log(director.approve(5));  // 经理批准：5天假期
console.log(director.approve(10)); // 总经理批准：10天假期
console.log(director.approve(30)); // 请假天数超出审批权限
```

这种模式的优势在于：如果后续需要增加审批环节（如增加 "副总" 审批 5-10 天假），只需新增一个处理类并插入到链条中，无需修改原有代码，符合 "开闭原则"。