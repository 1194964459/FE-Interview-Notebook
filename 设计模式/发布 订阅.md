# 手写发布/订阅 EventEmitter

在发布订阅模式里，发布者，并不会直接通知订阅者，换句话说，发布者和订阅者，彼此互不相识。


参考：https://juejin.cn/post/6862803836781002760

```js
// 事件总线（Event Bus）：第三方中介
class EventBus {
  constructor() {
    this.events = {}; // 存储 事件名: [订阅者函数列表]
  }
  // 订阅事件
  on(eventName, callback) {
    this.events[eventName] = this.events[eventName] || [];
    this.events[eventName].push(callback);
  }
  // 发布事件
  emit(eventName, data) {
    if (this.events[eventName]) {
      this.events[eventName].forEach(callback => callback(data));
    }
  }
}

// 使用：发布者和订阅者互不感知
const bus = new EventBus();

// 订阅者：只关心事件，不关心发布者
bus.on("dataChange", (data) => {
  console.log("收到更新：", data);
});

// 发布者：只发布事件，不关心订阅者
bus.emit("dataChange", "数据变了");
```

