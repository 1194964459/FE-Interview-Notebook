# Base64编码

**计算机中所有数据（*文本、图片、音频*等）本质上都是二进制（0 和 1）**，但很多场景（如文本协议、某些存储系统）只能处理可打印字符（如字母、数字、符号）。如果直接传输二进制数据，其中可能包含不可打印的控制字符（如 \0、\n 之外的特殊字节），可能导致传输中断、解析错误或数据丢失。

注意📢：**Base64 可以处理任何类型的二进制数据，无论其原始格式或内容是什么**。Base64 的核心是对 “二进制字节流” 进行编码，它不关心这些字节代表什么（文本、图片、音频、视频、压缩文件等）：
> 1. 无论原始数据是何种类型（如 .txt 文本、.jpg 图片、.mp3 音频、.zip 压缩包等），在计算机中最终都会被存储为二进制字节（0 和 1 的组合）。
> 2. Base64 编码时，会按固定规则（每 3 个字节一组，拆分为 4 个 6 位二进制数，再映射到 64 个可打印字符）对这些字节流进行转换，生成纯文本字符串。
> 3. 解码时，只需将 Base64 字符串按反向规则转换，即可还原原始的二进制字节流，再根据数据的原始类型（如图片、文本）进行解析即可。

## 定义
Base64 是一种基于 **64 个可打印字符**（A-Z、a-z、0-9、+、/，共 64 个）来表示二进制数据的编码方式，核心作用是**将二进制数据转换为文本格式**，以便在仅支持文本传输的场景中安全传递数据。

注意📢：**不管是什么格式的数据，最后都会转换为这64 个可打印字符！**（A-Z、a-z、0-9、+、/，共 64 个）

常用于在文本协议（如 HTTP、邮件）中传输二进制数据（如**图片**、**文件**），避免因二进制数据中的特殊字符导致传输错误。

## 特点
* Base64是可逆的 
* 编码后的数据长度比原始数据增加约 1/3（因为 3 字节 → 4 字符）。


## 为什么需要Base64?
1. 解决 “二进制数据在文本协议中传输的兼容性问题”  
很多网络协议（如 HTTP、SMTP、XML、JSON 等）最初是为文本传输设计的，对二进制数据（如图片、文件、加密后的字节流等）的支持不友好：
    * 二进制数据可能包含不可打印字符（如 ASCII 码中的控制字符），这些字符在传输过程中**可能被协议解析器误判为特殊指令，导致数据损坏或传输失败**。  
2. 保证数据的 “原样性”  
二进制数据在不同系统或环境中传递时，可能**因编码方式（如 UTF-8、GBK）的差异被误转换，导致数据失真**。

## 常见用途：
* 在 URL、Cookie 中传输二进制数据（避免特殊字符冲突）。
* 在 HTML/CSS 中嵌入图片（data:image/png;base64,...）。
* 邮件协议中传输附件（SMTP 协议通常基于文本）。
* JWT 中对 Header 和 Payload 的编码(使用 Base64URL 变体，替换+为-、/为_，去掉=）