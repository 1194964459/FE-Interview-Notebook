### 背景：
[小程序技术发展历史](https://developers.weixin.qq.com/ebook?action=get_post_info&docid=000668c6910b784b00860870a5ac0a)

在小程序没有出来之前，最初'微信WebView'逐渐成为'移动web'重要入口，微信发布了一整套网页开发工具包，称之为 JS-SDK。他让所有开发者都可以使用到微信的原生能力，去完成一些之前做不到或者难以做到的事情。
    
但是这种模式有以下缺点：
* 没有解决使用'移动网页'遇到的'体验不良'的问题，如受限于设备性能、网络速度，会出现'白屏的可能'。

后来又设计了一个增强版JS-SDK，也就是“微信 Web 资源离线存储”，但他仍有以下缺点：
* 复杂页面上依然会出现白屏
* 页面切换比较生硬
* 点击的迟滞感

因此，这个时候需要一个 JS-SDK 所处理不了的，使用户体验更好的一个系统，小程序应运而生。

### 一、小程序的优点：
* 快速的加载
* 原生的体验
* 易用且安全的微信数据开放
* 高效而简单的开发
* 更强大的能力

小程序采用**数据驱动视图**的理念，通过在逻辑层修改 data 中的数据，再调用 setData 方法将数据更新到视图层，视图层会根据新的数据重新渲染相关内容。


### 二、小程序与普通网页开发 区别：
共同点：都是基于 js 开发；

区别：

|     | 小程序开发  | 网页开发  |
|  ----  | ----  |----  |
| 是否含window对象  | 没有 | 有 |
| 是否可使用浏览器提供的DOM API | 不能 |可以 |
| 渲染/脚本线程 | 双线程开发 | 这两个线程是互斥的，因此长时间的脚本运行可能会导致页面失去响应 |
| 开发工具 | 需要经过申请小程序帐号、安装小程序开发者工具、配置项目等等过程方可完成。 |只需要使用到浏览器，并且搭配上一些辅助工具、编辑器即可 |

### 三、小程序的执行环境：

![渲染线程](./icon/icon_渲染线程.png)

### 四、小程序中为什么不能访问DOM、BOM?
小程序中没有 window、document 等浏览器环境特有的对象，这与小程序的**框架设计理念**和**运行环境**密切相关。
1. 运行环境  
小程序**并非运行**在传统浏览器中，而是**运行在宿主环境（如：微信客户端）提供的独立“运行时”**中。这个运行时本质上是一个**精简的沙箱环境**，**没有完整的浏览器内核(如 Chromium)**，因此不包含浏览器特有的 DOM/BOM API。

2. 框架设计的限制  
小程序采用声明式 UI和数据驱动的设计（类似 Vue/React），开发者不需要直接操作 DOM。

3. 安全性与性能考量   
小程序的**宿主环境（如微信）需要严格控制代码的权限范围**（避免恶意操作），同时**要保证性能**（尤其是在移动端）。*移除 window、document 等全局对象，可以减少安全风险*，并通过原生控件渲染提升性能。


> ### 小程序基础库：
> 小程序的基础库可以被注入到视图层和逻辑层运行，主要用于以下几个方面：
> * 在视图层，提供各类组件来组建界面的元素
> * 在逻辑层，提供各类 API 来处理各种逻辑
> * 处理数据绑定、组件系统、事件系统、通信系统等一系列框架逻辑
>         
> 小程序的基础库不会被打包在某个小程序的代码包里边，它会被提前内置在微信客户端。这样可以：
> * 降低业务小程序的代码包大小
> * 可以单独修复基础库中的 Bug，无需修改到业务小程序的代码包

